<style>
    .synth
    {
      border: solid 2px black;
    }
    .synth >h2
    {
      display: inline;
    }
    .synth >#led
    {
      display: inline-block;
      width: 10px;
      height: 10px;
      border-radius: 5px;
      background-color: red;
    }
    .octave-start
    {
      background-color: grey;

    }
    .black
    {
      background-color: black;
      color: white;
    }
    .white
    {
      background-color: #a5cfd5;
    }
    .piano-window >div
    {
      display: inline-block;
      width: 30px;
      height: 40px;
    }
    .piano-window >div:hover
    {
      cursor: pointer;
    }
    </style>
    <div class="synth">
      <h2>PcmSynth</h2>
      <span>note on</span>
      <div id="led"> </div>
      <div>
        <h2>Filter</h2>
        <div>cutoff</div>
        <div class="piano-window">
          <div class="octave-start">c3</div>
          <div class="black">c3#</div>
          <div class="white">d3</div>
          <div class="black">d3#</div>
          <div class="white">e3</div>
          <div class="white">f3</div>
          <div class="black">f3#</div>
          <div class="white">g3</div>
          <div class="black">g3#</div>
          <div class="white">a3</div>
          <div class="black">a3#</div>
          <div class="white">b3</div>

          <div class="octave-start">c4</div>
          <div class="black">c4#</div>
          <div class="white">d4</div>
          <div class="black">d4#</div>
          <div class="white">e4</div>
          <div class="white">f4</div>
          <div class="black">f4#</div>
          <div class="white">g4</div>
          <div class="black">g4#</div>
          <div class="white">a4</div>
          <div class="black">a4#</div>
          <div class="white">b4</div>

          <div class="octave-start">c5</div>
          <div class="black">c5#</div>
          <div class="white">d5</div>
          <div class="black">d5#</div>
          <div class="white">e5</div>
          <div class="white">f5</div>
          <div class="black">f5#</div>
          <div class="white">g5</div>
          <div class="black">a5#</div>
          <div class="white">a5</div>
          <div class="black">a5#</div>
          <div class="white">b5</div>
        </div>
        
    </div>

    <script>
      var ctx = new AudioContext()
      var buffer
      var sample = new AudioBufferSourceNode(ctx)
      const piano_window = document.getElementsByClassName("piano-window").item(0)
      var hihat_rq = new XMLHttpRequest()
      hihat_rq.responseType="arraybuffer"
      hihat_rq.open("GET","src/assets/CHR_Gospel_C3.wav")
      hihat_rq.onload = function(event)
      {
          console.log(hihat_rq.response)
          ctx.decodeAudioData(hihat_rq.response)
          // ctx.decodeAudioData(hihat_rq.response,function(data)
          // {
          //     // buffer = data
          //     // ClapBufferNode.buffer=data
          //     // console.log(data);
          // })
      }
      hihat_rq.send()
      // sample.playbackRate = 
      for(var i=0;i<piano_window.children.length;i++)
      {
        var reset_style
        var e = piano_window.children.item(i)
        // console.log(e);
        e.addEventListener("mousedown",(event)=>
        {
          // sample.start()
          sample = ctx.createBufferSource()
          // sample.buffer = buffer
          // alert(sample.buffer)
          // console.log(sample.buffer);
          sample.connect(ctx.destination)
          sample.start()
          reset_style = event.target.style
          var tg = event.target
          tg.style = "background-color:yellow"
        })
        e.addEventListener("mouseup",(event)=>
        {
          var tg = event.target
          tg.style = reset_style
        })
      }
    </script>