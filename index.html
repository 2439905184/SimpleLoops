<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <link rel="icon" href="/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vite App</title>
  </head>
  <body>
    <div id="app"></div>
    <script type="module" src="/src/main.js"></script>

    <span>乐器系列</span>
    <a href="/SimpleLoops/src/pcm.html">PcmSynth</a>
    <a href="/SimpleLoops/src/3XOSC.html">3xosc</a>
    <a href="/SimpleLoops/单乐器组件/美科FPC.html">美科FPC</a>
    <p>曲子选择</p>
    <button id="demo1">demo1</button>
    <button id="demo2">demo2</button>
    <button id="demo3">demo3</button>
    <audio id="bgm" src="/SimpleLoops/src/assets/demo1.mp3" controls></audio>

    <script>
      document.getElementById("demo1").addEventListener("mousedown",change)
      document.getElementById("demo2").addEventListener("mousedown",change)
      document.getElementById("demo3").addEventListener("mousedown",change)
      var bgmCtl = document.getElementById("bgm")
      function change(event)
      {
        var id = event.target.id
        if(id == "demo1")
        {
          bgmCtl.src = "/SimpleLoops/src/assets/demo1.mp3"
        }
        else if(id == "demo2")
        {
          bgmCtl.src = "/SimpleLoops/src/assets/demo2.mp3"
        }
        else if(id == "demo3")
        {
          bgmCtl.src = "/SimpleLoops/src/assets/demo3.mp3"
        }
      }
      var ctx = new AudioContext()
      var kick_buffer
      var clap_buffer
      var hihat_buffer
      var snare_buffer

      var kick_rq = new XMLHttpRequest()
kick_rq.responseType="arraybuffer"
kick_rq.open("GET","/SimpleLoops/src/assets/Basic 808 Kick.wav")
kick_rq.onload = function(event)
{
    // console.log(event)
    ctx.decodeAudioData(kick_rq.response,(data)=>
    {
        kick_buffer = data
        console.log(data);
    })
}
kick_rq.send()

var clap_rq = new XMLHttpRequest()
clap_rq.responseType="arraybuffer"
clap_rq.open("GET","/SimpleLoops/src/assets/Basic 808 Clap.wav")
clap_rq.onload = function(event)
{
    // console.log(event)
    ctx.decodeAudioData(clap_rq.response,(data)=>
    {
        clap_buffer = data
        console.log(data);
    })
}
clap_rq.send()

var hihat_rq = new XMLHttpRequest()
hihat_rq.responseType="arraybuffer"
hihat_rq.open("GET","/SimpleLoops/src/assets/Basic 808 HiHat.wav")
hihat_rq.onload = function(event)
{
    // console.log(event)
    ctx.decodeAudioData(hihat_rq.response,(data)=>
    {
        hihat_buffer = data
        console.log(data)
    })
}
hihat_rq.send()

var snare_rq = new XMLHttpRequest()
snare_rq.responseType="arraybuffer"
snare_rq.open("GET","/SimpleLoops/src/assets/Basic 808 Snare.wav")
snare_rq.onload = function(event)
{
    // console.log(event)
    ctx.decodeAudioData(snare_rq.response,(data)=>
    {
        snare_buffer = data
        console.log(data)
    })
}
snare_rq.send()

      window.tick_index = 0
    </script>
  </body>
</html>
